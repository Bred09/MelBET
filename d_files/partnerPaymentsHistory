function ChangeCur(){cur=$("#s_valuta option:selected").text()}function RefreshPaymentsHistory(n){var t=JSON.parse(n),r=visibleTable=="status_table",i;if(typeof history_table!="undefined"&&history_table.clear().draw(),typeof status_table!="undefined"&&status_table.clear().draw(),status_table.rows().data(t.status).draw(),history_table.rows().data(t.payments).draw(),t.payments.length!=0)for(i in t.payments)history_table.row.add(t.payments[i]).draw();if(t.status.length!=0)for(i in t.status)status_table.row.add(t.status[i]).draw();r?($("#status_table_wrapper").removeClass("hidden"),$("#history_table_wrapper").addClass("hidden")):($("#history_table_wrapper").removeClass("hidden"),$("#status_table_wrapper").addClass("hidden"))}var cur=$("#s_valuta option:selected").text(),visibleTable="status_table",paymentsStatus,statusTableConfig,historyTableConfig,status_table,history_table;$.fn.dataTable.moment(CULTURE_TIME);paymentsStatus={0:$.localize("Payment is being processed","~/Scripts/custom.js"),1:$.localize("Paid","~/Scripts/custom.js"),2:$.localize("Carried over to the next period","~/Scripts/custom.js"),3:$.localize("Waiting for payout","~/Scripts/custom.js"),4:$.localize("Waiting for payout","~/Scripts/custom.js")};statusTableConfig=Object.assign({},defaultDTConfig);statusTableConfig.columnDefs=[{className:"control table__cell table__cell_xs",orderable:!1,targets:0},{orderDataType:"datetime-moment",targets:2},{targets:"_all",className:"table__cell"}];statusTableConfig.order=[[1,"asc"]];statusTableConfig.createdRow=function(n){$("tr",n).addClass("table__row")};statusTableConfig.processing=!0;statusTableConfig.paging=!0;statusTableConfig.searching=!1;statusTableConfig.buttons=["excelHtml5","csvHtml5"];historyTableConfig=Object.assign({},statusTableConfig);statusTableConfig.columns=[{data:null,defaultContent:""},{data:"Merchant"},{data:"Period"},{data:"SummRequest",render:function(n){return FormatCurrency(n,cur)}},{data:"Summ",render:function(n){return FormatCurrency(n,cur)}},{data:"Balance",render:function(n){return FormatCurrency(n,cur)}},{data:"Status",render:function(n){return paymentsStatus[n]}}];statusTableConfig.dom='<"hidden"B><"row row_no-offset"<"col-xs-fluid col-sm-6 col-xs_bottom"<"#tabs1.tabs"<"tabs__item active"><"#tab-history_table.tabs__item">>><"col-xs-fluid col-sm-6 col-xs_bottom"l>>r<"table-wrap"t>ip';statusTableConfig.drawCallback=function(){$("#tabs1.tabs .tabs__item:first-child").text($.localize("Request status","~/Scripts/build/1_2/partner/payments/history.js"));$("#tabs1.tabs .tabs__item:last-child").text($.localize("Payment history","~/Scripts/build/1_2/partner/payments/history.js"))};status_table=$("#status_table").DataTable(statusTableConfig);historyTableConfig.columns=[{data:null,defaultContent:""},{data:"Merchant"},{data:"Period"},{data:"Comm",render:function(n){return FormatCurrency(n,cur)}},{data:"Paid",render:function(n){return FormatCurrency(n,cur)}},{data:"Bonus",render:function(n){return FormatCurrency(n,cur)}},{data:"Income",render:function(n){return FormatCurrency(n,cur)}},{data:"Transfer",render:function(n){return FormatCurrency(n,cur)}},{data:"DatePaid"},{data:"AvailableSumm",render:function(n){return FormatCurrency(n,cur)}}];historyTableConfig.dom='<"hidden"B><"row row_no-offset"<"col-xs-fluid col-sm-6 col-xs_bottom"<"#tabs2.tabs"<"#tab-status_table.tabs__item"><"tabs__item active">>><"col-xs-fluid col-sm-6 col-xs_bottom"l>>r<"table-wrap"t>ip';historyTableConfig.drawCallback=function(){visibleTable=="status_table"&&$("#history_table_wrapper").addClass("hidden");$("#tabs2.tabs .tabs__item:first-child").text($.localize("Request status","~/Scripts/build/1_2/partner/payments/history.js"));$("#tabs2.tabs .tabs__item:last-child").text($.localize("Payment history","~/Scripts/build/1_2/partner/payments/history.js"))};history_table=$("#history_table").DataTable(historyTableConfig);$(".tabs__item").on("click",function(){$(this).attr("id")=="tab-status_table"?($("#history_table_wrapper").addClass("hidden"),$("#status_table_wrapper").removeClass("hidden"),$($.fn.dataTable.tables(!0)).DataTable().responsive.recalc(),visibleTable="status_table"):$(this).attr("id")=="tab-history_table"&&($("#status_table_wrapper").addClass("hidden"),$("#history_table_wrapper").removeClass("hidden"),$($.fn.dataTable.tables(!0)).DataTable().responsive.recalc(),visibleTable="history_table")});$("#export_format").on("change",function(){if(!!$(this).val()){var n=!$("#status_table_wrapper").hasClass("hidden");n?$("#status_table_wrapper ."+$(this).val()).trigger("click"):$("#history_table_wrapper ."+$(this).val()).trigger("click");$(this).val("")}})